%% \LaTeX\ Template for Presentations, Handouts and Lecture Notes
%% Created by Galaa

%-----------------------------------

%% PRESENTATION MODE
\documentclass[compress,red,notheorems]{beamer}

%-----------------------------------

%% ARTICLE MODE
%\documentclass{article} \usepackage[notheorems]{beamerarticle}

%-----------------------------------

%% HANDOUT MODE
%\documentclass[compress,red,handout,notheorems]{beamer}
%\usepackage{pgfpages}\pgfpagesuselayout{8 on 1}[a4paper,border shrink=5mm]
%\pgfpageslogicalpageoptions{1}{border code=\pgfusepath{stroke}}
%\pgfpageslogicalpageoptions{2}{border code=\pgfusepath{stroke}}
%\pgfpageslogicalpageoptions{3}{border code=\pgfusepath{stroke}}
%\pgfpageslogicalpageoptions{4}{border code=\pgfusepath{stroke}}
%\pgfpageslogicalpageoptions{5}{border code=\pgfusepath{stroke}}
%\pgfpageslogicalpageoptions{6}{border code=\pgfusepath{stroke}}
%\pgfpageslogicalpageoptions{7}{border code=\pgfusepath{stroke}}
%\pgfpageslogicalpageoptions{8}{border code=\pgfusepath{stroke}}

%-----------------------------------

\usepackage[utf8x]{inputenc}
\usepackage[mongolian]{babel}
\usepackage{ifthen,forloop,fontawesome,url,tikz,pgfplots,multicol,listings,multirow,subcaption}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\def\thetitle{Title}
\def\thesubtitle{Subtitle}
\def\theauthor{Г.Махгал}
\def\theurl{http://galaa.mn/}
\def\theurldesc{www.galaa.mn}
\def\copyrightyear{2017}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subtitle{\thesubtitle}
\date{\tiny \faCodeFork\ \the\year/\the\month/\the\day}

\makeatletter
\let\beamer@writeslidentry@miniframeson=\beamer@writeslidentry
\def\beamer@writeslidentry@miniframesoff{%
 \expandafter\beamer@ifempty\expandafter{\beamer@framestartpage}{}% does not happen normally
 {%else
   % removed \addtocontents commands
   \clearpage\beamer@notesactions%
 }
}
\newcommand*{\miniframeson}{\let\beamer@writeslidentry=\beamer@writeslidentry@miniframeson}
\newcommand*{\miniframesoff}{\let\beamer@writeslidentry=\beamer@writeslidentry@miniframesoff}
\makeatother

\mode<presentation>{
 \usefonttheme[stillsansseriflarge]{serif}
 \usetheme{Luebeck}
 \usecolortheme{orchid}
 \useoutertheme[subsection=false]{smoothbars}
 \useinnertheme{rectangles}
 \addtobeamertemplate{background canvas}{\transfade[duration=1]}{}
 %\setbeamercolor{footnote}{fg=blue}
 \setbeamercolor{footnote mark}{fg=red}
 \renewcommand*{\thefootnote}{\setlength{\fboxsep}{1pt}\colorbox{white}{\tiny\arabic{footnote}}}
 \usenavigationsymbolstemplate{}
 \setbeamertemplate{itemize items}[default]
 \setbeamertemplate{enumerate items}[default]
 \setbeamertemplate{title page}[default]
 \setbeamertemplate{blocks}[default]
 \setbeamersize{text margin left=10pt,text margin right=10pt}
\newcounter{slidenumber}
\title[\href{\theurl}{\theurldesc}\hspace{0.25\textwidth}
\begin{minipage}{3em}
\flushright
\arabic{slidenumber}
\end{minipage}
\stepcounter{slidenumber}]{\thetitle}
\author[\textcopyright\ \copyrightyear\ifthenelse{\equal{\the\year}{\copyrightyear}}{}{\,--\,\the\year} \theauthor]{\theauthor}
\institute[]{\textcopyright\ \copyrightyear\ifthenelse{\equal{\the\year}{\copyrightyear}}{}{\,--\,\the\year} \theauthor\\ \textsf{\href{\theurl}{\theurldesc}}}
\logo{
\hyperlinkdocumentstart{
\usebeamercolor[bg]{frametitle}
\begin{tikzpicture}[scale=0.5,rotate=135]
 \draw [white,fill=bg] (0,0) -- (0,1) -- (1,1) -- (1,0) -- (0,0);
 \draw [white,fill=white] (0.25,0) -- (0.25,0.8) -- (0.55,0.8) -- (0.55,1) -- (0.75,1) -- (0.75,0.6) -- (0.45,0.6) -- (0.45,0) -- (0.25,0);
\end{tikzpicture}
}}
\titlegraphic{
\usebeamercolor[bg]{frametitle}
\begin{tikzpicture}[scale=0.5,rotate=135]
 \draw [white,fill=bg] (0,0) -- (0,1) -- (1,1) -- (1,0) -- (0,0);
 \draw [white,fill=white] (0.25,0) -- (0.25,0.8) -- (0.55,0.8) -- (0.55,1) -- (0.75,1) -- (0.75,0.6) -- (0.45,0.6) -- (0.45,0) -- (0.25,0);
\end{tikzpicture}}
 \renewcommand{\sectionname}{Хэсэг}
 \addto\captionsmongolian{\renewcommand{\sectionname}{Хэсэг}}
}

\mode<article>{
 \usepackage{hyperref,fullpage}
 \selectcolormodel{gray}
 \title{\thetitle}
 \author{\textcopyright\ \copyrightyear\ifthenelse{\equal{\the\year}{\copyrightyear}}{}{\,--\,\the\year} \theauthor}
 \renewcommand{\refname}{Ном зүй}
 \addto\captionsmongolian{\renewcommand{\refname}{Ном зүй}}
 \hypersetup{
   colorlinks=true
 }
 \usepackage{chngcntr}
 \counterwithin*{section}{part}
 \usepackage{geometry}
 \geometry{
  a4paper,
  inner=3.5cm,
  outer=2cm,
  top=2.5cm,
  bottom=2.75cm,
 }
 % Page Header
 \usepackage{fancyhdr}
 \pagestyle{fancy}
 \renewcommand\headrule{
   \begin{minipage}{1\textwidth}
   \color{gray}\hrule width \hsize \kern 1mm \hrule width \hsize height 2pt
   \vspace{16pt}
   \end{minipage}}
 \lhead[\textcopyright\ \copyrightyear\ifthenelse{\equal{\the\year}{\copyrightyear}}{}{\,--\,\the\year} \theauthor]{\href{\theurl}{\textcolor{black}{\theurldesc}}}
 \rhead[\href{\theurl}{\textcolor{black}{\theurldesc}}]{\textcopyright\ \copyrightyear\ifthenelse{\equal{\the\year}{\copyrightyear}}{}{\,--\,\the\year} \theauthor}
 \cfoot[\thepage]{\thepage}
 % Redefine the plain page style
 \fancypagestyle{plain}{%
   \fancyfoot[C]{\thepage}%
   \renewcommand\headrule{
   \begin{minipage}{1\textwidth}
   \color{gray}\hrule width \hsize \kern 1mm \hrule width \hsize height 2pt 
   \vspace{16pt}
   \end{minipage}}
 }
}

\hypersetup{
  unicode=true,pagebackref=true,
  pdftex,
  pdfauthor={\theauthor},
  pdftitle={\thetitle},
  pdfsubject={\thesubtitle},
  pdfkeywords={},
  pdfproducer={pdfLaTeX},
  pdfcreator={LaTeX with Beamer class}
}

\makeatletter
\AtBeginPart{
  \miniframesoff
  \setcounter{slidenumber}{1}
  \setcounter{footnote}{0}
  \beamer@tocsectionnumber=0\relax
  \setcounter{section}{0}
  % table of parts
  \addtocontents{toc}{\protect\beamer@partintoc{\the\c@part}{\beamer@partnameshort}{\the\c@page}}
  \frame{\partpage}
  \frame{\frametitle{\insertpart}\tableofcontents}
  \miniframeson
}
% table of parts
\providecommand\beamer@partintoc[3]{%
  \ifnum\c@tocdepth=-1\relax
    % requesting onlyparts.
    \item #2
  \fi
}
\define@key{beamertoc}{onlyparts}[]{%
  \c@tocdepth=-1\relax
}
\makeatother

\AtBeginSection[]{
  \subsection<presentation>{}
  \frame{\sectionpage}
}

\AtEndDocument{
  \miniframesoff
  \frame<presentation>[plain,noframenumbering]
  {
  \begin{center}
  \vskip1cm
  {\usebeamercolor[bg]{frametitle}
  \begin{tikzpicture}[scale=2,rotate=135]
   \draw [white,fill=bg] (0,0) -- (0,1) -- (1,1) -- (1,0) -- (0,0);
   \draw [white,fill=white] (0.25,0) -- (0.25,0.8) -- (0.55,0.8) -- (0.55,1) -- (0.75,1) -- (0.75,0.6) -- (0.45,0.6) -- (0.45,0) -- (0.25,0);
  \end{tikzpicture}
  }
  \vskip1cm
  \textcopyright\ \copyrightyear\ifthenelse{\equal{\the\year}{\copyrightyear}}{}{\,--\,\the\year} \theauthor \\ \textsf{\href{\theurl}{\theurldesc}}
  \end{center}
  }
  \miniframeson
}

\renewcommand{\partname}{Лекц}
\addto\captionsmongolian{\renewcommand{\partname}{Лекц}}
\theoremstyle{definition}
\newtheorem{definition}{Тодорхойлолт}
\newtheorem{theorem}{Теорем}
\newtheorem{lemma}{Лемм}
\newtheorem{corollary}{Мөрдлөгөө}
\newtheorem{example}{Жишээ}
\newtheorem{problem}{Бодлого}
\newtheorem{properties}{Чанар}
\newtheorem{formula}{Томъёо}
\theoremstyle{remark}
\newtheorem{remark}{Санамж}
\newtheorem{recall}{Сэргээн санах нь}

\lstset{
  language=R,
  basicstyle={\ttfamily},
%  backgroundcolor=\color{black!25},
  keywordstyle=\usebeamercolor[bg]{frametitle},
  commentstyle=\color{black!75},
  stringstyle=\color{black!75},
  breakatwhitespace=true,
  breaklines=true,
  frame=l,
  framesep=5pt,framerule=1pt,
  xleftmargin=7pt,xrightmargin=0pt,
  rulecolor=\usebeamercolor[bg]{frametitle},
  keepspaces=true,
  showstringspaces=false,
  columns=flexible,
  numbers=none,
  tabsize=3,
  %inputencoding=utf8,
  escapeinside={\#}{;},
  otherkeywords={},
  deletendkeywords={},
  deletekeywords={}
}

\usepackage{array}
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}

\begin{document}

\only<article>{\maketitle\tableofcontents}

\only<presentation>{

\miniframesoff

\frame[plain,noframenumbering]{\titlepage}

\frame[plain,noframenumbering]{
\begin{center}
\begin{tikzpicture}
\node at (0,0) {\scalebox{6}{\faCamera}};
\node at (0,0) [opacity=0.85] {\usebeamercolor[bg]{frametitle}\scalebox{18}{\faBan}};
\end{tikzpicture}
\\[1em]
{\scshape фото зураг бичиж тэмдэглэх чадварт сөрөг нөлөөтэй}
\end{center}
}

\bgroup
\setbeamertemplate{frametitle continuation}{\gdef\beamer@frametitle{}}
\addtobeamertemplate{frametitle}{}{\vspace{2\baselineskip}}
\frame[allowframebreaks,plain,noframenumbering]{\frametitle{Агуулга}
\begin{enumerate}
\item[] \vspace{-\baselineskip}
\tableofcontents[onlyparts]
\end{enumerate}

}
\egroup

\miniframeson

}

\part{Title}

\section[Short title]{Title}

\frame{
\frametitle{Frame title\footnote{footnote}}\framesubtitle{Frame subtitle text}
\begin{theorem}
\end{theorem}
\begin{proof}[Баталгаа\nopunct]
\end{proof}
\begin{proof}[Баталгаа\nopunct]\renewcommand{\qedsymbol}{\ldots}
\end{proof}
\begin{lemma}
\end{lemma}
\begin{corollary}
\end{corollary}
}

\frame{
\frametitle{Frame title}\framesubtitle{Frame subtitle text}
\begin{definition}[Additional text]
\end{definition}
\begin{block}{Block title}
\only<presentation>{\vspace{-4mm}}
\begin{eqnarray*}
f(x) & = & x\cdot x \\
 & = & x^2
\end{eqnarray*}
\end{block}
\begin{exampleblock}{Block title}

\end{exampleblock}
\begin{example}[Additional text]
\end{example}
\begin{problem}[Additional text]
\end{problem}
}

\part{Title}

\section[Short title]{Title}

\begin{frame}
\frametitle{Frame title}\framesubtitle{Frame subtitle text}
\structure{Heading} Text
\\[1em]
\begin{structureenv}
environment contents
\end{structureenv}
\\[1em]
This is \alert{important}.
\\[1em]
\begin{alertenv}
environment contents
\end{alertenv}
\vspace{1em}
\begin{description}[most long label]
\item[label] description
\item[long label] long description
\item[longest label] description
\end{description}
\end{frame}

\section[Short title]{Title}

\begin{frame}[fragile]
\frametitle{Frame title}\framesubtitle{Frame subtitle text}
\lstinline[keywords={print},otherkeywords={}]|print('Hello LaTeX!')|
\begin{example}[additional text]\only<article>{\hfil}
\begin{lstlisting}[keywords={if,else,print},otherkeywords={}]
if (condition) { #\# comment $a^2+b^2=c^2$ ;
  print(TRUE)
} else {
  print(FALSE)
}
\end{lstlisting}
\end{example}
\end{frame}

\frame[containsverbatim]{
\frametitle{Frame title}\framesubtitle{Frame subtitle text}
\verb|print('Текст')|
\begin{verbatim}
if (нөхцөл) {
  print(үнэн)
} else {
  print(худал)
}
\end{verbatim}
}

\section[Short title]{Title}

\frame{
\frametitle{Frame title}\framesubtitle{Frame subtitle text}
\begin{figure}[!h]
\centering
\faImage
\caption{caption}
\end{figure}
% Дэд зураг
\begin{figure}[!h]
\centering
\begin{subfigure}{0.45\textwidth}
\centering
\faImage
\caption{caption}
\end{subfigure}
\begin{subfigure}{0.45\textwidth}
\centering
\faImage
\caption{caption}
\end{subfigure}
\caption{caption}
\end{figure}
\begin{example}\only<article>{\hfil}
\begin{figure}[!h]
\centering
\faImage
\caption{caption}
\end{figure}
\only<presentation>{\vspace{-4mm}}
\end{example}
}

\frame{
\frametitle{Frame title}\framesubtitle{Frame subtitle text}
\begin{table}[!h]
\setlength{\tabcolsep}{8pt}
\renewcommand{\arraystretch}{1.25}
\centering
\begin{tabular}{rcl|R{0.1\textwidth}C{0.1\textwidth}L{0.1\textwidth}}
r & c & l & R & C & L \\
\hline
\multirow{2}{*}{rows} & 1 & 2 & 3 & 4 & 5 \\
 & 1 & 2 & \multicolumn{3}{c}{multicolumn} \\
\end{tabular}
\caption{caption}
\end{table}
}

\section[Short title]{Title}

\frame{
\frametitle{Frame title}\framesubtitle{Frame subtitle text}
\begin{columns}[t]
\column{0.5\textwidth}
column
\column{0.5\textwidth}
column
\end{columns}
}

\frame{
\frametitle{Frame title}\framesubtitle{Frame subtitle text}
\begin{multicols}{2}
\begin{itemize}
\item item
\item item
\item item
\item item
\item[]
\item item
\end{itemize}
\end{multicols}
}

\miniframesoff

\begin{frame}[plain,noframenumbering]
\only<presentation>{\frametitle{Ном зүй}}
\begin{thebibliography}{}
%\setbeamertemplate{bibliography item}[book]
\setbeamertemplate{bibliography item}{\usebeamercolor[bg]{frametitle}\faBook}
\bibitem{Knuth1986}
Donald E.Knuth
\newblock {\em The TeXbook}.
\newblock American Mathematical Society, 1986.

\bibitem{Tantau2015}
Till Tantau, Joseph Wright, Vedran Miletić
\newblock {\em The beamer class -- User Guide for version 3.36.}.
\newblock 2015.
\end{thebibliography}
\end{frame}

\miniframeson

\end{document}